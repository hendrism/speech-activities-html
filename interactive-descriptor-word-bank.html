<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Descriptor Word Bank</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --accent: #8b5cf6;
            --blue: #0ea5e9;
            --green: #10b981;
            --orange: #f59e0b;
            --red: #ef4444;
            --bg: #f8fafc;
            --ink: #0f172a;
        }

        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        header {
            background: white;
            border-bottom: 3px solid var(--accent);
            border-radius: 12px 12px 0 0;
            padding: 24px 32px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h1 {
            color: var(--accent);
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .subtitle {
            color: #64748b;
            font-size: 15px;
            margin-bottom: 20px;
        }

        .instructions {
            background: #fef3c7;
            border-left: 4px solid var(--orange);
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            color: #78350f;
            margin-bottom: 20px;
        }

        main {
            background: white;
            padding: 32px;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .controls {
            margin-bottom: 32px;
        }

        .control-section {
            margin-bottom: 24px;
        }

        .control-label {
            font-size: 15px;
            font-weight: 600;
            color: var(--ink);
            margin-bottom: 12px;
            display: block;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .filter-btn {
            background: white;
            border: 2px solid #e2e8f0;
            color: var(--ink);
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
            transform: translateY(-1px);
        }

        .filter-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 16px;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary:hover {
            background: #7c3aed;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: white;
            color: var(--ink);
            border: 2px solid #e2e8f0;
            padding: 10px 24px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            border-color: var(--orange);
            color: var(--orange);
        }

        .selected-words-container {
            background: #f0fdf4;
            border: 2px solid var(--green);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 32px;
        }

        .selected-words-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .selected-words-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--green);
        }

        .word-count {
            background: var(--green);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .selected-words-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            min-height: 50px;
        }

        .selected-word {
            background: white;
            color: var(--green);
            border: 2px solid var(--green);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .selected-word.custom {
            color: var(--accent);
            border-color: var(--accent);
        }

        .selected-word:hover {
            background: #dcfce7;
        }

        .selected-word.custom:hover {
            background: #f3e8ff;
        }

        .remove-word {
            font-size: 16px;
            color: var(--red);
            cursor: pointer;
        }

        #customWordInput:focus {
            outline: none;
            border-color: var(--accent);
        }

        .empty-state {
            color: #4b5563;
            font-style: italic;
            font-size: 14px;
        }

        .word-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .word-category {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            border: 3px solid;
            transition: all 0.2s;
        }

        .word-category.hidden {
            display: none;
        }

        .category-title {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .category-icon {
            font-size: 22px;
        }

        .word-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .word-tag {
            background: white;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 15px;
            border: 2px solid;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .word-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .word-tag.selected {
            background: var(--green);
            color: white;
            border-color: var(--green);
        }

        .word-tag.hidden {
            display: none;
        }

        /* Color schemes for categories */
        .appearance { border-color: #3498db; background: #ebf5fb; }
        .appearance .category-title { color: #2874a6; }
        .appearance .word-tag { border-color: #85c1e9; color: #1f618d; }
        
        .size { border-color: #e74c3c; background: #fadbd8; }
        .size .category-title { color: #c0392b; }
        .size .word-tag { border-color: #f1948a; color: #a93226; }
        
        .feelings { border-color: #f39c12; background: #fef5e7; }
        .feelings .category-title { color: #d68910; }
        .feelings .word-tag { border-color: #f8c471; color: #b9770e; }
        
        .personality { border-color: #9b59b6; background: #f4ecf7; }
        .personality .category-title { color: #7d3c98; }
        .personality .word-tag { border-color: #d2b4de; color: #6c3483; }
        
        .condition { border-color: #1abc9c; background: #e8f8f5; }
        .condition .category-title { color: #138d75; }
        .condition .word-tag { border-color: #7dcea0; color: #117a65; }
        
        .speed { border-color: #e67e22; background: #fef5e7; }
        .speed .category-title { color: #ca6f1e; }
        .speed .word-tag { border-color: #f0b27a; color: #af601a; }
        
        .sound { border-color: #34495e; background: #ecf0f1; }
        .sound .category-title { color: #2c3e50; }
        .sound .word-tag { border-color: #95a5a6; color: #34495e; }
        
        .manner { border-color: #16a085; background: #e8f6f3; }
        .manner .category-title { color: #117a65; }
        .manner .word-tag { border-color: #76d7c4; color: #0e6655; }
        
        .sensory { border-color: #8e44ad; background: #f5eef8; }
        .sensory .category-title { color: #6c3483; }
        .sensory .word-tag { border-color: #c39bd3; color: #5b2c6f; }
        
        .weather { border-color: #2980b9; background: #eaf2f8; }
        .weather .category-title { color: #1f618d; }
        .weather .word-tag { border-color: #7fb3d5; color: #1a5276; }

        @media (max-width: 768px) {
            body {
                padding: 12px;
            }

            header, main {
                padding: 20px;
            }

            .filter-buttons {
                flex-direction: column;
            }

            .filter-btn {
                width: 100%;
            }

            .word-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn-primary, .btn-secondary {
                width: 100%;
            }
        }

        @media print {
            body {
                background: white;
            }
            .controls, .action-buttons {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Interactive Descriptor Word Bank</h1>
            <p class="subtitle">Click words to add them to your story!</p>
            <div class="instructions">
                üí° <strong>Instructions:</strong> Use the filters to find the types of words you need, then click on words to select them. You can also add your own words! Try to pick 3 or more descriptive words for your story.
            </div>
        </header>

        <main>
            <div class="controls">
                <div class="control-section">
                    <label class="control-label">üéØ Filter by What You're Describing:</label>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-subject="all" onclick="filterBySubject('all')">Show All</button>
                        <button class="filter-btn" data-subject="person" onclick="filterBySubject('person')">üë§ People</button>
                        <button class="filter-btn" data-subject="animal" onclick="filterBySubject('animal')">üêæ Animals</button>
                        <button class="filter-btn" data-subject="object" onclick="filterBySubject('object')">üì¶ Objects</button>
                        <button class="filter-btn" data-subject="place" onclick="filterBySubject('place')">üè† Places</button>
                        <button class="filter-btn" data-subject="action" onclick="filterBySubject('action')">‚ö° Actions</button>
                    </div>
                </div>

                <div class="control-section">
                    <label class="control-label">‚úèÔ∏è Add Your Own Word:</label>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <input type="text" id="customWordInput" placeholder="Type a descriptive word..." 
                               style="flex: 1; min-width: 200px; padding: 10px 16px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 15px; font-family: inherit;">
                        <button class="btn-primary" onclick="addCustomWord()">‚ûï Add Word</button>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn-primary" onclick="pickRandomWord()">üé≤ Pick Random Word</button>
                    <button class="btn-secondary" onclick="clearSelection()">üóëÔ∏è Clear Selection</button>
                </div>
            </div>

            <div class="selected-words-container">
                <div class="selected-words-header">
                    <span class="selected-words-title">‚ú® Your Selected Words</span>
                    <span class="word-count" id="wordCount">0 words</span>
                </div>
                <div class="selected-words-list" id="selectedWordsList">
                    <span class="empty-state">Click on words below to add them to your collection!</span>
                </div>
            </div>

            <div class="word-grid" id="wordGrid">
                <!-- Words will be populated by JavaScript -->
            </div>
        </main>
    </div>

    <script>
        // Word data with metadata
        const wordData = {
            appearance: {
                title: 'Appearance (How it looks)',
                icon: 'üëÅÔ∏è',
                words: [
                    {word: 'bright', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'dark', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'colorful', type: 'adjective', subjects: ['object', 'place', 'animal']},
                    {word: 'dull', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'shiny', type: 'adjective', subjects: ['object', 'animal']},
                    {word: 'rusty', type: 'adjective', subjects: ['object']},
                    {word: 'spotless', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'messy', type: 'adjective', subjects: ['object', 'place', 'person', 'animal']},
                    {word: 'worn', type: 'adjective', subjects: ['object']},
                    {word: 'new', type: 'adjective', subjects: ['object']},
                    {word: 'old', type: 'adjective', subjects: ['object', 'person', 'animal', 'place']},
                    {word: 'ragged', type: 'adjective', subjects: ['object', 'person']},
                    {word: 'elegant', type: 'adjective', subjects: ['object', 'person', 'place']},
                    {word: 'fancy', type: 'adjective', subjects: ['object', 'person', 'place']},
                    {word: 'plain', type: 'adjective', subjects: ['object', 'person', 'place']}
                ]
            },
            size: {
                title: 'Size & Shape',
                icon: 'üìè',
                words: [
                    {word: 'tiny', type: 'adjective', subjects: ['object', 'animal', 'place']},
                    {word: 'huge', type: 'adjective', subjects: ['object', 'animal', 'place']},
                    {word: 'enormous', type: 'adjective', subjects: ['object', 'animal', 'place']},
                    {word: 'massive', type: 'adjective', subjects: ['object', 'animal', 'place']},
                    {word: 'small', type: 'adjective', subjects: ['object', 'animal', 'place', 'person']},
                    {word: 'large', type: 'adjective', subjects: ['object', 'animal', 'place', 'person']},
                    {word: 'towering', type: 'adjective', subjects: ['object', 'place', 'person']},
                    {word: 'cramped', type: 'adjective', subjects: ['place']},
                    {word: 'spacious', type: 'adjective', subjects: ['place']},
                    {word: 'narrow', type: 'adjective', subjects: ['place', 'object']},
                    {word: 'wide', type: 'adjective', subjects: ['place', 'object']},
                    {word: 'round', type: 'adjective', subjects: ['object']},
                    {word: 'square', type: 'adjective', subjects: ['object']},
                    {word: 'crooked', type: 'adjective', subjects: ['object']}
                ]
            },
            feelings: {
                title: 'Feelings & Emotions',
                icon: 'üòä',
                words: [
                    {word: 'happy', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'sad', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'excited', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'nervous', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'worried', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'calm', type: 'adjective', subjects: ['person', 'animal', 'place']},
                    {word: 'angry', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'frustrated', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'cheerful', type: 'adjective', subjects: ['person', 'animal', 'place']},
                    {word: 'proud', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'scared', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'brave', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'curious', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'confused', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'determined', type: 'adjective', subjects: ['person', 'animal']}
                ]
            },
            personality: {
                title: 'Personality Traits',
                icon: '‚≠ê',
                words: [
                    {word: 'friendly', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'grumpy', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'shy', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'outgoing', type: 'adjective', subjects: ['person']},
                    {word: 'kind', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'mean', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'playful', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'serious', type: 'adjective', subjects: ['person']},
                    {word: 'lazy', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'energetic', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'patient', type: 'adjective', subjects: ['person']},
                    {word: 'impatient', type: 'adjective', subjects: ['person']},
                    {word: 'clever', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'silly', type: 'adjective', subjects: ['person', 'animal']}
                ]
            },
            condition: {
                title: 'Condition & Quality',
                icon: 'üîß',
                words: [
                    {word: 'broken', type: 'adjective', subjects: ['object']},
                    {word: 'perfect', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'damaged', type: 'adjective', subjects: ['object']},
                    {word: 'clean', type: 'adjective', subjects: ['object', 'place', 'person', 'animal']},
                    {word: 'dirty', type: 'adjective', subjects: ['object', 'place', 'person', 'animal']},
                    {word: 'fresh', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'stale', type: 'adjective', subjects: ['object']},
                    {word: 'rotten', type: 'adjective', subjects: ['object']},
                    {word: 'crisp', type: 'adjective', subjects: ['object']},
                    {word: 'soggy', type: 'adjective', subjects: ['object']},
                    {word: 'smooth', type: 'adjective', subjects: ['object']},
                    {word: 'rough', type: 'adjective', subjects: ['object']},
                    {word: 'soft', type: 'adjective', subjects: ['object', 'animal']},
                    {word: 'hard', type: 'adjective', subjects: ['object']}
                ]
            },
            speed: {
                title: 'Speed & Movement (Adverbs)',
                icon: '‚ö°',
                words: [
                    {word: 'quickly', type: 'adverb', subjects: ['action']},
                    {word: 'slowly', type: 'adverb', subjects: ['action']},
                    {word: 'rapidly', type: 'adverb', subjects: ['action']},
                    {word: 'suddenly', type: 'adverb', subjects: ['action']},
                    {word: 'gradually', type: 'adverb', subjects: ['action']},
                    {word: 'swiftly', type: 'adverb', subjects: ['action']},
                    {word: 'lazily', type: 'adverb', subjects: ['action']},
                    {word: 'frantically', type: 'adverb', subjects: ['action']},
                    {word: 'smoothly', type: 'adverb', subjects: ['action']},
                    {word: 'clumsily', type: 'adverb', subjects: ['action']},
                    {word: 'gracefully', type: 'adverb', subjects: ['action']},
                    {word: 'urgently', type: 'adverb', subjects: ['action']},
                    {word: 'hesitantly', type: 'adverb', subjects: ['action']}
                ]
            },
            sound: {
                title: 'Sound & Volume',
                icon: 'üîä',
                words: [
                    {word: 'loud', type: 'adjective', subjects: ['person', 'animal', 'object', 'place']},
                    {word: 'quiet', type: 'adjective', subjects: ['person', 'animal', 'object', 'place']},
                    {word: 'silent', type: 'adjective', subjects: ['person', 'animal', 'place']},
                    {word: 'noisy', type: 'adjective', subjects: ['person', 'animal', 'object', 'place']},
                    {word: 'deafening', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'soft', type: 'adjective', subjects: ['object']},
                    {word: 'whispering', type: 'adjective', subjects: ['person']},
                    {word: 'booming', type: 'adjective', subjects: ['object']},
                    {word: 'shrieking', type: 'adjective', subjects: ['person', 'animal']},
                    {word: 'buzzing', type: 'adjective', subjects: ['animal', 'object']},
                    {word: 'humming', type: 'adjective', subjects: ['person', 'object']},
                    {word: 'crackling', type: 'adjective', subjects: ['object']},
                    {word: 'echoing', type: 'adjective', subjects: ['place']}
                ]
            },
            manner: {
                title: 'Manner (How someone acts)',
                icon: 'üé≠',
                words: [
                    {word: 'carefully', type: 'adverb', subjects: ['action']},
                    {word: 'carelessly', type: 'adverb', subjects: ['action']},
                    {word: 'gently', type: 'adverb', subjects: ['action']},
                    {word: 'roughly', type: 'adverb', subjects: ['action']},
                    {word: 'eagerly', type: 'adverb', subjects: ['action']},
                    {word: 'reluctantly', type: 'adverb', subjects: ['action']},
                    {word: 'confidently', type: 'adverb', subjects: ['action']},
                    {word: 'nervously', type: 'adverb', subjects: ['action']},
                    {word: 'proudly', type: 'adverb', subjects: ['action']},
                    {word: 'shyly', type: 'adverb', subjects: ['action']},
                    {word: 'boldly', type: 'adverb', subjects: ['action']},
                    {word: 'timidly', type: 'adverb', subjects: ['action']},
                    {word: 'politely', type: 'adverb', subjects: ['action']},
                    {word: 'rudely', type: 'adverb', subjects: ['action']}
                ]
            },
            sensory: {
                title: 'Sensory (Smell, Taste, Touch)',
                icon: 'üëÉ',
                words: [
                    {word: 'sweet', type: 'adjective', subjects: ['object']},
                    {word: 'sour', type: 'adjective', subjects: ['object']},
                    {word: 'bitter', type: 'adjective', subjects: ['object']},
                    {word: 'spicy', type: 'adjective', subjects: ['object']},
                    {word: 'delicious', type: 'adjective', subjects: ['object']},
                    {word: 'disgusting', type: 'adjective', subjects: ['object']},
                    {word: 'fragrant', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'stinky', type: 'adjective', subjects: ['object', 'place', 'animal']},
                    {word: 'smoky', type: 'adjective', subjects: ['place']},
                    {word: 'warm', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'cold', type: 'adjective', subjects: ['object', 'place']},
                    {word: 'freezing', type: 'adjective', subjects: ['place']},
                    {word: 'scorching', type: 'adjective', subjects: ['place']},
                    {word: 'steaming', type: 'adjective', subjects: ['object']}
                ]
            },
            weather: {
                title: 'Weather & Atmosphere',
                icon: 'üå§Ô∏è',
                words: [
                    {word: 'sunny', type: 'adjective', subjects: ['place']},
                    {word: 'cloudy', type: 'adjective', subjects: ['place']},
                    {word: 'rainy', type: 'adjective', subjects: ['place']},
                    {word: 'stormy', type: 'adjective', subjects: ['place']},
                    {word: 'foggy', type: 'adjective', subjects: ['place']},
                    {word: 'misty', type: 'adjective', subjects: ['place']},
                    {word: 'windy', type: 'adjective', subjects: ['place']},
                    {word: 'calm', type: 'adjective', subjects: ['place']},
                    {word: 'gloomy', type: 'adjective', subjects: ['place']},
                    {word: 'cheerful', type: 'adjective', subjects: ['place']},
                    {word: 'cozy', type: 'adjective', subjects: ['place']},
                    {word: 'dreary', type: 'adjective', subjects: ['place']},
                    {word: 'peaceful', type: 'adjective', subjects: ['place']},
                    {word: 'chaotic', type: 'adjective', subjects: ['place']}
                ]
            }
        };

        let selectedWords = [];
        let currentSubjectFilter = 'all';

        // Initialize the word bank
        function initializeWordBank() {
            const wordGrid = document.getElementById('wordGrid');
            
            for (const [category, data] of Object.entries(wordData)) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = `word-category ${category}`;
                categoryDiv.setAttribute('data-category', category);
                
                const titleDiv = document.createElement('div');
                titleDiv.className = 'category-title';
                titleDiv.innerHTML = `
                    <span class="category-icon">${data.icon}</span>
                    <span>${data.title}</span>
                `;
                
                const wordList = document.createElement('div');
                wordList.className = 'word-list';
                
                data.words.forEach(wordObj => {
                    const wordTag = document.createElement('span');
                    wordTag.className = 'word-tag';
                    wordTag.textContent = wordObj.word;
                    wordTag.setAttribute('data-word', wordObj.word);
                    wordTag.setAttribute('data-type', wordObj.type);
                    wordTag.setAttribute('data-subjects', wordObj.subjects.join(','));
                    wordTag.onclick = () => toggleWord(wordObj.word, wordTag);
                    wordList.appendChild(wordTag);
                });
                
                categoryDiv.appendChild(titleDiv);
                categoryDiv.appendChild(wordList);
                wordGrid.appendChild(categoryDiv);
            }
        }

        // Toggle word selection
        function toggleWord(word, element) {
            const index = selectedWords.findIndex(w => w.word === word && !w.isCustom);
            
            if (index > -1) {
                selectedWords.splice(index, 1);
                element.classList.remove('selected');
            } else {
                selectedWords.push({word: word, isCustom: false});
                element.classList.add('selected');
            }
            
            updateSelectedWordsDisplay();
        }

        // Add custom word
        function addCustomWord() {
            const input = document.getElementById('customWordInput');
            const word = input.value.trim();
            
            if (!word) {
                alert('Please type a word first!');
                return;
            }
            
            // Check if word already exists in selection
            if (selectedWords.some(w => w.word.toLowerCase() === word.toLowerCase())) {
                alert('This word is already in your selection!');
                input.value = '';
                return;
            }
            
            selectedWords.push({word: word, isCustom: true});
            input.value = '';
            updateSelectedWordsDisplay();
        }

        // Allow Enter key to add custom word
        document.addEventListener('DOMContentLoaded', function() {
            const input = document.getElementById('customWordInput');
            if (input) {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        addCustomWord();
                    }
                });
            }
        });

        // Update selected words display
        function updateSelectedWordsDisplay() {
            const wordsList = document.getElementById('selectedWordsList');
            const wordCount = document.getElementById('wordCount');
            
            wordCount.textContent = `${selectedWords.length} word${selectedWords.length !== 1 ? 's' : ''}`;
            
            if (selectedWords.length === 0) {
                wordsList.innerHTML = '<span class="empty-state">Click on words below to add them to your collection!</span>';
            } else {
                wordsList.innerHTML = '';
                selectedWords.forEach(wordObj => {
                    const wordSpan = document.createElement('span');
                    wordSpan.className = wordObj.isCustom ? 'selected-word custom' : 'selected-word';
                    wordSpan.innerHTML = `
                        ${wordObj.isCustom ? '‚úèÔ∏è ' : ''}${wordObj.word}
                        <span class="remove-word" onclick="removeWord('${wordObj.word}', ${wordObj.isCustom})">√ó</span>
                    `;
                    wordsList.appendChild(wordSpan);
                });
            }
        }

        // Remove word from selection
        function removeWord(word, isCustom) {
            const index = selectedWords.findIndex(w => w.word === word && w.isCustom === isCustom);
            if (index > -1) {
                selectedWords.splice(index, 1);
                if (!isCustom) {
                    const wordTag = document.querySelector(`[data-word="${word}"]`);
                    if (wordTag) {
                        wordTag.classList.remove('selected');
                    }
                }
                updateSelectedWordsDisplay();
            }
        }

        // Filter by subject
        function filterBySubject(subject) {
            currentSubjectFilter = subject;
            
            // Update button states
            document.querySelectorAll('[data-subject]').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-subject="${subject}"]`).classList.add('active');
            
            applyFilters();
        }

        // Apply filters
        function applyFilters() {
            document.querySelectorAll('.word-tag').forEach(tag => {
                const wordSubjects = tag.getAttribute('data-subjects').split(',');
                
                const subjectMatch = currentSubjectFilter === 'all' || wordSubjects.includes(currentSubjectFilter);
                
                if (subjectMatch) {
                    tag.classList.remove('hidden');
                } else {
                    tag.classList.add('hidden');
                }
            });
            
            // Hide empty categories
            document.querySelectorAll('.word-category').forEach(category => {
                const visibleWords = category.querySelectorAll('.word-tag:not(.hidden)');
                if (visibleWords.length === 0) {
                    category.classList.add('hidden');
                } else {
                    category.classList.remove('hidden');
                }
            });
        }

        // Pick random word
        function pickRandomWord() {
            const visibleWords = Array.from(document.querySelectorAll('.word-tag:not(.hidden):not(.selected)'));
            
            if (visibleWords.length === 0) {
                alert('No more words available to pick! Try adjusting your filters or clearing your selection.');
                return;
            }
            
            const randomWord = visibleWords[Math.floor(Math.random() * visibleWords.length)];
            const word = randomWord.getAttribute('data-word');
            
            if (!selectedWords.some(w => w.word === word)) {
                selectedWords.push({word: word, isCustom: false});
                randomWord.classList.add('selected');
                updateSelectedWordsDisplay();
                
                // Scroll to the selected word
                randomWord.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Clear selection
        function clearSelection() {
            selectedWords = [];
            document.querySelectorAll('.word-tag').forEach(tag => {
                tag.classList.remove('selected');
            });
            updateSelectedWordsDisplay();
        }

        // Initialize on page load
        initializeWordBank();
    </script>
</body>
</html>