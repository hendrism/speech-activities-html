<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Final /l/ Consonant Blend Stories</title>
  <style>
    :root{
      --bg:#0b0d12;/* deep slate */
      --card:#111827;/* neutral panel */
      --text:#e5e7eb;/* light gray */
      --muted:#9ca3af;/* muted */
      --accent:#22d3ee;/* cyan */
      --accent-2:#a78bfa;/* violet */
      --ring: 0 0 0 .12rem var(--accent);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% -10%, rgba(34,211,238,.12), transparent 50%),
                  radial-gradient(1200px 800px at 120% 10%, rgba(167,139,250,.10), transparent 50%),
                  var(--bg);
      line-height:1.6;
    }
    .container{max-width:900px;margin: clamp(1rem,3vw,2rem) auto;padding: clamp(1rem,3vw,2rem)}
    header h1{margin:0 0 .25rem 0;font-weight:800;letter-spacing:.2px}
    header p{margin:0;color:var(--muted)}

    .controls{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center;margin:1rem 0 1.25rem 0}
    .controls .spacer{flex:1}

    .select, .btn, .checkbox, .text{display:inline-flex;align-items:center;gap:.5rem;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.03);color:var(--text);padding:.6rem .8rem;border-radius:.75rem}
    .select:focus-within, .btn:focus-visible{outline:none;box-shadow:var(--ring)}
    select{appearance:none;border:none;background:transparent;color:inherit;font:inherit;padding-right:1.6rem}
    .select{position:relative}
    .select:after{content:"â–¾";position:absolute;right:.6rem;pointer-events:none;color:var(--muted)}

    .btn{cursor:pointer;user-select:none}
    .btn[disabled]{opacity:.5;cursor:not-allowed}
    .btn.primary{background:linear-gradient(90deg, rgba(34,211,238,.18), rgba(167,139,250,.18));border-color:rgba(255,255,255,.14)}

    .badge{font-variant-numeric: tabular-nums;border:1px dashed rgba(255,255,255,.15);padding:.45rem .65rem;border-radius:.65rem;color:var(--muted)}

    .card{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));border:1px solid rgba(255,255,255,.08);backdrop-filter: blur(8px);
          border-radius:1rem;padding:1.25rem 1.25rem 1rem 1.25rem;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .card h2{margin:.25rem 0 .25rem 0;font-size:1.35rem}
    .card p{margin:.75rem 0;font-size:1.04rem}

    .questions{margin-top:1rem;border-top:1px dashed rgba(255,255,255,.1);padding-top:1rem} .questions textarea{width:100%;min-height:3.25rem;margin:.4rem 0 .8rem 0;padding:.6rem .7rem;border-radius:.6rem;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.04);color:var(--text);resize:vertical} .questions textarea:focus{outline:none;box-shadow:var(--ring)} .questions label{display:block;font-size:.95rem;color:var(--muted);margin-top:.25rem} .questions ol{margin:.25rem 0 .5rem 1.2rem} .questions li{margin-bottom:.25rem}
    .questions h3{margin:.25rem 0 .5rem 0;color:var(--muted);font-weight:600;letter-spacing:.3px}
    .questions ol{margin:.25rem 0 .5rem 1.2rem}

    mark.blend{background:#ffe083;color:#1b1f23;padding:.1rem .2rem;border-radius:.25rem;box-shadow:0 0 0 .08rem rgba(0,0,0,.12)}

    .footer{display:flex;gap:.6rem;align-items:center;margin-top:1rem;color:var(--muted);font-size:.95rem}

    @media (prefers-color-scheme: light){
      :root{--bg:#eef2ff;--card:#ffffff;--text:#0b1324;--muted:#4b5563}
      body{background: radial-gradient(1200px 800px at 10% -10%, rgba(34,211,238,.16), transparent 45%),
                    radial-gradient(1200px 800px at 120% 10%, rgba(167,139,250,.14), transparent 45%),
                    var(--bg)}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Final /l/ Consonant Blend Stories</h1>
      <p>Shows one story at a time with openâ€‘ended questions. Toggle highlighting to see words ending in <em>-ld, -lt, -lf, -lp, -lk, -lm</em>.</p>
    </header>

    <div class="controls" role="group" aria-label="Story controls">
      <div class="select" title="Choose story">
        <label class="sr-only" for="storySelect">Story</label>
        <select id="storySelect" aria-label="Select story"></select>
      </div>

      <button id="prevBtn" class="btn" aria-label="Previous story">â—€ Previous</button>
      <span id="progress" class="badge" aria-live="polite">1 / 6</span>
      <button id="nextBtn" class="btn primary" aria-label="Next story">Next â–¶</button>

      <div class="spacer"></div>

      <label class="checkbox" for="highlight">
        <input id="highlight" type="checkbox" /> Highlight /l/ blends
      </label>
      <button id="printBtn" class="btn" aria-label="Print this story">ðŸ–¨ Print</button>
    </div>

    <article id="card" class="card" aria-live="polite">
      <h2 id="title"></h2>
      <p id="text"></p>
      <section class="questions">
        <h3>Questions</h3>
        <ol id="qs"></ol>
      </section>
    </article>

    <div class="footer">
      <span>Tip: Press J / K to go previous / next. Press H to toggle highlight.</span>
    </div>
  </div>

  <script>
    // --- Data ---
    const stories = [
  {
    title: "1. The Cold Morning",
    text: "Liam woke up early and pulled on his thick quilt. The air felt cold, and frost covered the field behind his house. He built a small fire in the fireplace to help warm up the room. His mom poured him a glass of milk while they watched the sun rise over the hills.

After breakfast he pulled on his coat and belt and went outside to feed the calf. The metal pail felt cold, so he held it with a glove. Liam walked across the field and helped his neighbor stack wood on the shelf by the shed.",
    questions: [
      { q: "What helps you feel warm on a cold morning?", starter: "On a cold morning, I help myself feel warm by " },
      { q: "What do you like to do when you wake up early?", starter: "When I wake up early, I like to " }
    ]
  },
  {
    title: "2. The Lost Calf",
    text: "Mila and her dad walked through the tall grass, trying to find the lost calf. They followed small tracks that led down to the stream. When they finally found the calf, it stood still and looked scared. Mila helped her dad guide it back to the field.

On the hill by the fence, the wind felt cold and sharp. Mila held the rope while her dad fixed a split board with a new bolt. Back at the barn, they filled a small pail with warm milk to help the calf feel calm.",
    questions: [
      { q: "Have you ever helped take care of an animal?", starter: "I helped take care of an animal when " },
      { q: "How would you feel if you found something that was lost?", starter: "If I found something that was lost, I would feel " }
    ]
  },
  {
    title: "3. The Quilt Contest",
    text: "At school, the class built a colorful quilt made of small fabric squares. Each student added one piece to help. When they finished, they felt proud of their work. The quilt hung in the hall for everyone to see.

During lunch, the group held a small vote to pick a title. Liam sketched a wolf and a hill on a label and slipped it under the last quilt block. The art club helped install the quilt on a sturdy rail so it would not tilt.",
    questions: [
      { q: "What project have you helped make with a group?", starter: "A project I helped make with a group was " },
      { q: "Why do you think people feel proud when they build something together?", starter: "People feel proud when they build something together because " }
    ]
  },
  {
    title: "4. The Milk Spill",
    text: "Caleb grabbed the jug of milk, but it slipped from his hand and spilled all over the shelf. He ran to get a towel to help clean it up. His sister laughed, but then she helped too. They both learned to be more careful next time.

They filled a small bowl with soap and warm water and wiped the shelf until it felt smooth. Caleb built a little lip out of wood to keep things from sliding. He told himself to hold the handle with both hands so the jug would not tilt and fall.",
    questions: [
      { q: "What is something that went wrong but you fixed it?", starter: "Something went wrong when " },
      { q: "How do you feel when someone helps you after a mistake?", starter: "When someone helps me after a mistake, I feel " }
    ]
  },
  {
    title: "5. The Hike on the Hill",
    text: "Talia and her friends climbed up the steep hill to look at the sunset. They felt tired but happy when they reached the top. The world looked calm and still. They talked quietly and shared snacks from their small pack.

On the trail down, they stepped over a small stream and held the rail on a short bridge. The air smelled like salt from the gulf far away. At the bottom, Talia helped fold a quilt and built a small fire to keep the chill off while they told stories.",
    questions: [
      { q: "What do you like about being outside?", starter: "I like being outside because " },
      { q: "How do you feel when you reach a goal that took a lot of effort?", starter: "When I reach a goal after hard work, I feel " }
    ]
  },
  {
    title: "6. The Wolf in the Woods",
    text: "Ben read a story about a wolf that lived deep in the woods. The wolf was not mean; it helped lost animals find their way home. Ben felt calm when he read the story before bed, under a soft blanket.

The next day, Ben built a small model den on a shelf and labeled a hill, a trail, and a cold stream on a map. He told his class how a gentle wolf could still be bold and helpful, and his friends held up cards to clap in silent applause.",
    questions: [
      { q: "What kind of stories help you feel calm?", starter: "A story that helps me feel calm is about " },
      { q: "Why do you think people sometimes write stories about animals?", starter: "People write stories about animals because " }
    ]
  }
];

    // --- Utilities ---
    function escapeHtml(str){
      return str
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'",'&#39;');
    }

    // Highlight words that end with ld, lt, lf, lp, lk, lm (case-insensitive)
    const blendEnding = /(\b)([A-Za-z]+)(ld|lt|lf|lp|lk|lm)(\b)/gi;
    function maybeHighlight(text){
      if(!highlight.checked) return escapeHtml(text);
      return escapeHtml(text).replace(blendEnding, (m, b1, root, end, b2) => `${b1}<mark class="blend">${root}${end}</mark>${b2}`);
    }

    // --- Render ---
    const titleEl = document.getElementById('title');
    const textEl = document.getElementById('text');
    const qsEl = document.getElementById('qs');
    const selectEl = document.getElementById('storySelect');
    const progressEl = document.getElementById('progress');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const highlight = document.getElementById('highlight');

    let idx = 0;

    function populateSelect(){
      selectEl.innerHTML = stories.map((s,i)=>`<option value="${i}">${s.title}</option>`).join('');
    }

    function render(){
  const s = stories[idx];
  titleEl.textContent = s.title;
  // Split paragraphs on double newline and wrap each in <p>
  const paras = s.text.split(/

+/).map(p=>`<p>${maybeHighlight(p)}</p>`).join('');
  textEl.innerHTML = paras;
  // Render questions with sentence starters and textareas
  qsEl.innerHTML = s.questions.map((obj,i)=>{
    const id = `q_${idx}_${i}`;
    const safeQ = escapeHtml(obj.q);
    const safeStarter = escapeHtml(obj.starter || "");
    return `<li><span>${safeQ}</span><label for="${id}">Sentence starter:</label><textarea id="${id}" placeholder="${safeStarter}"></textarea></li>`;
  }).join('');
  selectEl.value = String(idx);
  progressEl.textContent = `${idx+1} / ${stories.length}`;
  prevBtn.disabled = idx === 0;
  nextBtn.disabled = idx === stories.length - 1;
}</li>`).join('');
      selectEl.value = String(idx);
      progressEl.textContent = `${idx+1} / ${stories.length}`;
      prevBtn.disabled = idx === 0;
      nextBtn.disabled = idx === stories.length - 1;
    }

    // --- Events --- 
    prevBtn.addEventListener('click', ()=>{ if(idx>0){ idx--; render(); }});
    nextBtn.addEventListener('click', ()=>{ if(idx<stories.length-1){ idx++; render(); }});
    selectEl.addEventListener('change', (e)=>{ idx = Number(e.target.value); render(); });
    highlight.addEventListener('change', ()=> render());
    document.getElementById('printBtn').addEventListener('click', ()=>{ window.print(); });

    // Keyboard shortcuts: J (prev), K (next), H (highlight)
    window.addEventListener('keydown', (e)=>{
      const tag = (e.target && e.target.tagName) || '';
      if(tag === 'INPUT' || tag === 'TEXTAREA' || e.metaKey || e.ctrlKey || e.altKey) return;
      if(e.key.toLowerCase()==='j'){ prevBtn.click(); }
      if(e.key.toLowerCase()==='k'){ nextBtn.click(); }
      if(e.key.toLowerCase()==='h'){ highlight.checked = !highlight.checked; render(); }
    });

    // Init
    populateSelect();
    render();
  </script>
</body>
</html>
