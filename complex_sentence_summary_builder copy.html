<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Complex Sentence Summary Builder</title>
  <style>
    :root {
      --bg: #f1f5f9;
      --surface: #ffffff;
      --primary: #6366f1;
      --secondary: #0ea5e9;
      --muted: #475569;
      --radius: 18px;
      --max-width: 1100px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg);
      color: #0f172a;
      line-height: 1.6;
    }

    header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      padding: 32px 20px;
      text-align: center;
      box-shadow: 0 12px 28px rgba(79, 70, 229, 0.25);
      position: sticky;
      top: 0;
      z-index: 30;
    }

    header h1 {
      margin: 0;
      font-size: 30px;
    }

    header p {
      margin: 10px auto 0;
      max-width: 700px;
      font-size: 16px;
      opacity: 0.92;
    }

    main {
      max-width: var(--max-width);
      margin: 28px auto 60px;
      padding: 0 18px 60px;
    }

    .story-nav {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 22px;
    }

    .story-btn {
      border: 2px solid rgba(79, 70, 229, 0.25);
      background: white;
      color: var(--primary);
      padding: 10px 18px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .story-btn:hover {
      background: rgba(99, 102, 241, 0.12);
      border-color: rgba(99, 102, 241, 0.4);
    }

    .story-btn.active {
      background: var(--primary);
      color: white;
      border-color: transparent;
      box-shadow: 0 8px 18px rgba(79, 70, 229, 0.25);
    }

    .story-card {
      background: var(--surface);
      border-radius: var(--radius);
      border: 2px solid rgba(148, 163, 184, 0.18);
      padding: 26px;
      box-shadow: 0 16px 32px rgba(15, 23, 42, 0.12);
    }

    .story-header {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
      align-items: flex-start;
      margin-bottom: 18px;
    }

    .story-header h2 {
      margin: 0;
      font-size: 22px;
      color: var(--primary);
    }

    .info-chip {
      background: rgba(14, 165, 233, 0.12);
      color: #0e7490;
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
    }

    .story-text {
      background: rgba(148, 163, 184, 0.12);
      border-left: 5px solid var(--secondary);
      border-radius: 12px;
      padding: 18px;
      font-size: 15px;
      margin-bottom: 20px;
    }

    .story-text p {
      margin: 0 0 10px;
    }

    .step {
      margin-bottom: 24px;
      background: rgba(99, 102, 241, 0.08);
      border-radius: 16px;
      border: 2px solid rgba(99, 102, 241, 0.2);
      padding: 18px;
    }

    .step h3 {
      margin: 0 0 12px;
      font-size: 16px;
      color: var(--primary);
    }

    .prompt-grid {
      display: grid;
      gap: 14px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .prompt-box {
      background: white;
      border-radius: 12px;
      border: 2px solid rgba(148, 163, 184, 0.24);
      padding: 12px;
    }

    .prompt-box label {
      display: block;
      font-weight: 600;
      color: var(--muted);
      font-size: 13px;
      margin-bottom: 6px;
    }

    textarea, input[type="text"], select {
      width: 100%;
      border-radius: 10px;
      border: 2px solid rgba(148, 163, 184, 0.35);
      padding: 10px;
      font-family: inherit;
      font-size: 15px;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
      background: #fff;
    }

    textarea:focus, input[type="text"]:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    .choice-row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }

    .sentence-preview {
      background: rgba(16, 185, 129, 0.12);
      border: 2px solid rgba(16, 185, 129, 0.3);
      border-radius: 14px;
      padding: 16px 18px;
      color: #065f46;
      font-size: 16px;
      margin-bottom: 16px;
      min-height: 60px;
    }

    .sentence-preview.empty {
      color: rgba(6, 95, 70, 0.6);
      font-style: italic;
    }

    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      border: 2px solid rgba(79, 70, 229, 0.25);
      background: white;
      color: var(--primary);
      padding: 10px 16px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    button:hover {
      background: rgba(99, 102, 241, 0.1);
      border-color: rgba(99, 102, 241, 0.4);
    }

    button.primary {
      background: var(--primary);
      color: white;
      border-color: transparent;
      box-shadow: 0 6px 16px rgba(79, 70, 229, 0.25);
    }

    button.primary:hover {
      background: #4f46e5;
    }

    .notes {
      margin-top: 22px;
      background: rgba(148, 163, 184, 0.12);
      border: 2px solid rgba(148, 163, 184, 0.25);
      border-radius: 14px;
      padding: 16px;
    }

    .notes h4 {
      margin: 0 0 10px;
      font-size: 15px;
      color: var(--muted);
    }

    .notes-list {
      margin: 0;
      padding-left: 20px;
      font-size: 15px;
    }

    .sentence-row {
      background: rgba(99, 102, 241, 0.08);
      border: 2px solid rgba(99, 102, 241, 0.2);
      border-radius: 14px;
      padding: 14px;
      margin-bottom: 16px;
    }

    .row-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
    }

    .row-header strong {
      color: var(--primary);
      font-size: 15px;
    }

    .input-row {
      display: grid;
      gap: 10px;
      grid-template-columns: 1fr minmax(140px, auto) 1fr;
      align-items: center;
    }

    .input-row select {
      min-width: 140px;
    }

    .row-buttons {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    @media (max-width: 720px) {
      header h1 { font-size: 26px; }
      .sentence-template { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Complex Sentence Summary Builder</h1>
    <p>Read each short text, collect key ideas, and build a complex sentence that explains the authorâ€™s purpose, theme, or main idea using conjunctions, prepositions, or adverbs.</p>
  </header>

  <main>
    <div class="story-nav" id="storyNav"></div>

    <section class="story-card">
      <div class="story-header">
        <h2 id="storyTitle">Loading Storyâ€¦</h2>
        <span class="info-chip" id="storyFocus">Theme Focus</span>
      </div>

      <div class="story-text" id="storyText"></div>

      <div class="step">
        <h3>Step 1 Â· Capture the Key Ideas</h3>
        <div class="prompt-grid">
          <div class="prompt-box">
            <label for="whoInput">Who / Main character?</label>
            <textarea id="whoInput" placeholder="Who is the text about?"></textarea>
          </div>
          <div class="prompt-box">
            <label for="problemInput">What happened or what problem?</label>
            <textarea id="problemInput" placeholder="What important event or challenge happened?"></textarea>
          </div>
          <div class="prompt-box">
            <label for="messageInput">Why did the author include this / theme?</label>
            <textarea id="messageInput" placeholder="Author's purpose or lesson?"></textarea>
          </div>
        </div>
      </div>

      <div class="step">
        <h3>Step 2 Â· Build Complex Sentences</h3>
        <p style="margin-bottom:14px;color:var(--muted);">Write one clause in each box. Pick a conjunction that links the ideas into a complex sentence.</p>
        <div id="sentenceRows"></div>
        <div class="controls" style="margin-top:16px;">
          <button class="primary" id="addRowBtn">âž• Add Another Sentence Row</button>
        </div>
      </div>

      <div class="notes">
        <h4>Saved Sentences</h4>
        <ul class="notes-list" id="notesList"></ul>
      </div>
    </section>
  </main>

  <script>
    const stories = [
      {
        title: "The Library Fundraiser",
        focus: "Authorâ€™s Purpose: persuade the town to care about reading spaces",
        text: [
          "The school library roof started leaking during a spring storm, soaking several shelves.",
          "Ms. Patel, the librarian, emailed families about the damage and asked for ideas.",
          "Students decided to host a weekend read-a-thon to collect donations.",
          "They designed posters, recorded short videos, and handed out flyers at soccer practice.",
          "The principal matched every dollar they raised, and the library reopened with new books.",
          "Ms. Patel thanked the community and explained how fresh stories keep readers curious."
        ]
      },
      {
        title: "Coach Riveraâ€™s Lesson",
        focus: "Theme: hard work and teamwork build trust",
        text: [
          "The basketball team lost three games in a row because they argued during plays.",
          "Coach Rivera called a meeting and asked each player to name a teammateâ€™s strength.",
          "At the next practice, she made them run drills where every pass had to include a compliment.",
          "At first it felt silly, but the players started laughing instead of blaming each other.",
          "They played their next game calmly, and even though they were tired, they finished strong.",
          "Coach Rivera said winning matters less than playing like a family."
        ]
      },
      {
        title: "Miaâ€™s Science Project",
        focus: "Main idea: curiosity leads to discovery",
        text: [
          "Miaâ€™s science class was studying local water quality, and she noticed strange bubbles near a park drain.",
          "She tested the water and found extra detergent in the sample.",
          "When she told her teacher, he encouraged her to present the data at the town meeting.",
          "Mia was nervous, but she created clear slides that explained the problem and suggested a solution.",
          "The city agreed to inspect the pipes, and a nearby laundromat fixed its waste tank.",
          "Mia felt proud that her curiosity helped keep the river clean."
        ]
      },
      {
        title: "Community Garden Saturday",
        focus: "Authorâ€™s purpose: inform how teamwork improved the neighborhood",
        text: [
          "Every Saturday, the community garden hosts families who want to learn about fresh food.",
          "Mr. Lopez shows people how to plant seeds without wasting water.",
          "Kids paint signs that explain which vegetables are ready to pick.",
          "Musicians from the high school jazz club play upbeat songs while people work.",
          "By lunchtime, the volunteers fill baskets for the food pantry.",
          "Neighbors go home with recipes, and the garden stays open late for anyone who wants to visit."
        ]
      }
    ];

    const storyNav = document.getElementById("storyNav");
    const storyTitle = document.getElementById("storyTitle");
    const storyFocus = document.getElementById("storyFocus");
    const storyText = document.getElementById("storyText");
    const whoInput = document.getElementById("whoInput");
    const problemInput = document.getElementById("problemInput");
    const messageInput = document.getElementById("messageInput");
    const sentenceRowsContainer = document.getElementById("sentenceRows");
    const addRowBtn = document.getElementById("addRowBtn");
    const notesList = document.getElementById("notesList");

    let currentStoryIndex = 0;
    let sentenceRowCount = 0;

    function buildStoryNav() {
      stories.forEach((story, index) => {
        const btn = document.createElement("button");
        btn.className = "story-btn";
        btn.textContent = `${index + 1}. ${story.title}`;
        btn.addEventListener("click", () => loadStory(index));
        storyNav.appendChild(btn);
      });
    }

    function clearInputs() {
      [whoInput, problemInput, messageInput].forEach(field => field.value = "");
      sentenceRowsContainer.innerHTML = "";
      notesList.innerHTML = "";
    }

    function loadStory(index) {
      currentStoryIndex = index;
      const story = stories[index];

      document.querySelectorAll(".story-btn").forEach((btn, btnIndex) => {
        btn.classList.toggle("active", btnIndex === index);
      });

      storyTitle.textContent = story.title;
      storyFocus.textContent = story.focus;
      storyText.innerHTML = story.text.map(par => `<p>${par}</p>`).join("");

      clearInputs();
      buildInitialRows();
    }

    function capitalize(str) {
      if (!str) return "";
      return str.charAt(0).toUpperCase() + str.slice(1);
    }

    function buildInitialRows() {
      sentenceRowsContainer.innerHTML = "";
      sentenceRowCount = 0;
      addSentenceRow("Summarize the main action in one clause", "Explain the author's message in one clause");
      addSentenceRow("Describe how a character responds", "Connect the response to the theme or purpose");
    }

    function addSentenceRow(promptLeft, promptRight) {
      sentenceRowCount += 1;
      const rowId = `row-${sentenceRowCount}`;
      const row = document.createElement("div");
      row.className = "sentence-row";
      row.dataset.rowId = rowId;

      row.innerHTML = `
        <div class="row-header">
          <strong>Sentence ${sentenceRowCount}</strong>
          <button type="button" data-action="save">ðŸ’¾ Save Sentence</button>
        </div>
        <div class="input-row">
          <div class="prompt-box">
            <label>${promptLeft || "Clause A"}</label>
            <textarea data-role="left-clause" placeholder="${promptLeft || "Write the first part of the sentence"}"></textarea>
          </div>
          <div class="prompt-box">
            <label>Conjunction</label>
            <select data-role="conjunction">
              <option value="because">because (reason)</option>
              <option value="although">although (contrast)</option>
              <option value="when">when (time)</option>
              <option value="while">while (time/contrast)</option>
              <option value="since">since (reason/time)</option>
              <option value="after">after (time)</option>
              <option value="before">before (time)</option>
              <option value="so that">so that (purpose)</option>
            </select>
          </div>
          <div class="prompt-box">
            <label>${promptRight || "Clause B"}</label>
            <textarea data-role="right-clause" placeholder="${promptRight || "Write the second part of the sentence"}"></textarea>
          </div>
        </div>
        <div class="sentence-preview empty" data-role="preview">Fill the boxes to see the sentence.</div>
        <div class="row-buttons">
          <button type="button" data-action="clear">ðŸ§½ Clear</button>
          <button type="button" data-action="copy">ðŸ“‹ Copy</button>
        </div>
      `;

      sentenceRowsContainer.appendChild(row);
    }

    function updateRowPreview(row) {
      const leftClause = row.querySelector('[data-role="left-clause"]').value.trim();
      const rightClause = row.querySelector('[data-role="right-clause"]').value.trim();
      const conjunction = row.querySelector('[data-role="conjunction"]').value;
      const preview = row.querySelector('[data-role="preview"]');

      if (!leftClause || !rightClause) {
        preview.classList.add("empty");
        preview.textContent = "Fill both clause boxes to see the sentence.";
        return;
      }

      const sentence = `${capitalize(leftClause)} ${conjunction} ${rightClause}.`.replace(/\s+/g, " ");

      preview.classList.remove("empty");
      preview.textContent = sentence;
    }

    function handleRowClick(e) {
      const button = e.target.closest("button");
      if (!button) return;

      const row = e.target.closest(".sentence-row");
      const action = button.dataset.action;
      if (!row || !action) return;

      const preview = row.querySelector('[data-role="preview"]');

      switch (action) {
        case "clear":
          row.querySelectorAll('textarea, input[type="text"]').forEach(el => el.value = "");
          preview.classList.add("empty");
          preview.textContent = "Fill both clause boxes to see the sentence.";
          break;
        case "copy":
          if (preview.classList.contains("empty")) return;
          navigator.clipboard.writeText(preview.textContent);
          button.textContent = "âœ… Copied!";
          setTimeout(() => button.textContent = "ðŸ“‹ Copy", 1200);
          break;
        case "save":
          if (preview.classList.contains("empty")) return;
          const li = document.createElement("li");
          li.textContent = preview.textContent;
          notesList.appendChild(li);
          button.textContent = "âœ… Saved";
          setTimeout(() => button.textContent = "ðŸ’¾ Save Sentence", 1200);
          break;
        default:
          break;
      }
    }

    sentenceRowsContainer.addEventListener("input", (e) => {
      const row = e.target.closest(".sentence-row");
      if (!row) return;
      updateRowPreview(row);
    });

    sentenceRowsContainer.addEventListener("change", (e) => {
      const row = e.target.closest(".sentence-row");
      if (!row) return;
      updateRowPreview(row);
    });

    sentenceRowsContainer.addEventListener("click", handleRowClick);

    addRowBtn.addEventListener("click", () => {
      addSentenceRow("Describe another key detail", "Explain why that detail matters");
    });

    buildStoryNav();
    loadStory(0);
  </script>
</body>
</html>
