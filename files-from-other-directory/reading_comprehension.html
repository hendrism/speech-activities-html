<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Reading Comprehension - Main Ideas & Vocabulary</title>
<style>
  :root {
    --w: 1200px;
    --accent: #3b82f6;
    --bg: #f8fafc;
    --ink: #0f172a;
    --ok: #10b981;
    --err: #ef4444;
    --warning: #f59e0b;
    --purple: #8b5cf6;
    --gray: #64748b;
  }
  
  * { box-sizing: border-box; }
  
  body { 
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
    background: var(--bg); 
    color: var(--ink); 
    margin: 0; 
    line-height: 1.6;
    font-size: 16px;
  }
  
  header { 
    background: white; 
    border-bottom: 3px solid #e2e8f0; 
    position: sticky; 
    top: 0; 
    z-index: 10; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .bar { 
    max-width: var(--w); 
    margin: 0 auto; 
    padding: 20px; 
    display: grid; 
    grid-template-columns: 1fr auto; 
    gap: 20px; 
    align-items: center; 
  }
  
  .bar h1 { 
    font-size: 22px; 
    margin: 0; 
    color: var(--accent);
    font-weight: 700;
  }
  
  .controls { 
    display: flex; 
    gap: 12px; 
    align-items: center; 
    flex-wrap: wrap;
  }
  
  main { 
    max-width: var(--w); 
    margin: 30px auto; 
    padding: 0 20px; 
  }
  
  .story-selector {
    display: flex;
    gap: 12px;
    margin-bottom: 30px;
    flex-wrap: wrap;
    justify-content: center;
  }
  
  .story-btn {
    padding: 12px 20px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.2s ease;
  }
  
  .story-btn.active {
    background: var(--accent);
    color: white;
    border-color: var(--accent);
  }
  
  .activity-container {
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    margin-bottom: 30px;
  }
  
  .story-header {
    text-align: center;
    margin-bottom: 30px;
  }
  
  .story-title {
    color: var(--accent);
    font-size: 28px;
    margin: 0 0 10px;
    font-weight: 700;
  }
  
  .activity-toggle {
    display: flex;
    gap: 12px;
    justify-content: center;
    margin-bottom: 30px;
  }
  
  .toggle-btn {
    padding: 12px 24px;
    border-radius: 25px;
    font-size: 16px;
    font-weight: 600;
    transition: all 0.2s ease;
    border: 2px solid #cbd5e1;
    background: #f8fafc;
    cursor: pointer;
  }
  
  .toggle-btn.active {
    background: var(--purple);
    color: white;
    border-color: var(--purple);
  }
  
  .story-text {
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 30px;
    font-size: 18px;
    line-height: 1.7;
  }
  
  .story-text p {
    margin: 0 0 20px;
  }
  
  .story-text p:last-child {
    margin-bottom: 0;
  }
  
  .highlight {
    background: #fef3c7;
    padding: 2px 4px;
    border-radius: 4px;
    font-weight: 600;
  }
  
  .activity-section {
    display: none;
  }
  
  .activity-section.active {
    display: block;
  }
  
  /* Main Idea & Details Activity */
  .main-idea-activity {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
  }
  
  .choices-bank {
    background: #fffbeb;
    border: 3px dashed var(--warning);
    border-radius: 12px;
    padding: 20px;
    min-height: 400px;
  }
  
  .choices-bank h3 {
    color: #92400e;
    margin: 0 0 16px;
    font-size: 18px;
    text-align: center;
  }
  
  .drop-zones {
    display: grid;
    gap: 20px;
  }
  
  .drop-zone {
    min-height: 180px;
    border: 3px dashed #cbd5e1;
    border-radius: 12px;
    padding: 20px;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .drop-zone h3 {
    text-align: center;
    margin: 0 0 16px;
    padding: 10px;
    border-radius: 8px;
    font-size: 18px;
    font-weight: 700;
  }
  
  .main-idea-zone {
    background: #fef2f2;
    border-color: var(--err);
  }
  
  .main-idea-zone h3 {
    background: var(--err);
    color: white;
  }
  
  .details-zone {
    background: #f0f9ff;
    border-color: var(--accent);
  }
  
  .details-zone h3 {
    background: var(--accent);
    color: white;
  }
  
  .drop-zone.drag-over {
    transform: scale(1.02);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }
  
  .main-idea-zone.drag-over {
    border-color: #dc2626;
    background: #fee2e2;
  }
  
  .details-zone.drag-over {
    border-color: #2563eb;
    background: #dbeafe;
  }
  
  .draggable-choice {
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 12px;
    cursor: move;
    transition: all 0.2s ease;
    font-size: 16px;
    line-height: 1.5;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  
  .draggable-choice:hover {
    border-color: var(--purple);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  
  .draggable-choice.dragging {
    opacity: 0.5;
    transform: rotate(5deg);
  }
  
  .draggable-choice.placed {
    border-color: var(--ok);
    background: #f0fdf4;
  }
  
  .draggable-choice.incorrect {
    border-color: var(--err);
    background: #fef2f2;
  }
  
  /* Vocabulary Activity */
  .vocab-activity {
    max-width: 800px;
    margin: 0 auto;
  }
  
  .vocab-word {
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 30px;
  }
  
  .vocab-word-title {
    font-size: 24px;
    font-weight: 700;
    color: var(--purple);
    margin-bottom: 15px;
    text-align: center;
  }
  
  .vocab-sentence {
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    font-size: 18px;
    line-height: 1.6;
  }
  
  .vocab-target {
    background: #ddd6fe;
    color: #5b21b6;
    padding: 3px 6px;
    border-radius: 4px;
    font-weight: 700;
  }
  
  .vocab-question {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 15px;
    color: var(--ink);
  }
  
  .vocab-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #cbd5e1;
    border-radius: 8px;
    font-size: 16px;
    margin-bottom: 15px;
  }
  
  .vocab-help-section {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  
  .hint-box {
    background: #fef3c7;
    border: 2px solid var(--warning);
    border-radius: 8px;
    padding: 16px;
    margin-top: 15px;
    display: none;
  }
  
  .hint-box.show {
    display: block;
    animation: fadeIn 0.3s ease;
  }
  
  .hint-box h4 {
    color: #92400e;
    margin: 0 0 8px;
    font-size: 16px;
  }
  
  .multiple-choice {
    display: none;
    margin-top: 20px;
  }
  
  .multiple-choice.show {
    display: block;
    animation: fadeIn 0.3s ease;
  }
  
  .choice-option {
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    padding: 12px 16px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  
  .choice-option:hover {
    border-color: var(--purple);
    background: #f8fafc;
  }
  
  .choice-option.selected {
    border-color: var(--accent);
    background: #eff6ff;
  }
  
  .choice-option.correct {
    border-color: var(--ok);
    background: #f0fdf4;
  }
  
  .choice-option.incorrect {
    border-color: var(--err);
    background: #fef2f2;
  }
  
  button {
    border: 2px solid #cbd5e1;
    background: #f8fafc;
    padding: 12px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    transition: all 0.2s ease;
  }
  
  button:hover {
    background: #e2e8f0;
    border-color: #94a3b8;
  }
  
  button.primary {
    background: var(--accent);
    color: white;
    border-color: var(--accent);
  }
  
  button.primary:hover {
    background: #2563eb;
  }
  
  button.success {
    background: var(--ok);
    color: white;
    border-color: var(--ok);
  }
  
  button.warning {
    background: var(--warning);
    color: white;
    border-color: var(--warning);
  }
  
  button.danger {
    background: var(--err);
    color: white;
    border-color: var(--err);
  }
  
  .feedback {
    background: #f8fafc;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px;
    margin-top: 20px;
    display: none;
  }
  
  .feedback.show {
    display: block;
  }
  
  .feedback.success {
    background: #f0fdf4;
    border-color: var(--ok);
    color: #065f46;
  }
  
  .feedback.error {
    background: #fef2f2;
    border-color: var(--err);
    color: #991b1b;
  }
  
  .empty-zone-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--gray);
    font-style: italic;
    text-align: center;
    pointer-events: none;
    font-size: 14px;
  }
  
  .zone-content {
    min-height: 120px;
    position: relative;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @media (max-width: 768px) {
    .main-idea-activity {
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .choices-bank {
      order: -1;
    }
    
    .bar {
      grid-template-columns: 1fr;
      gap: 15px;
      text-align: center;
    }
    
    .controls {
      justify-content: center;
    }
    
    .vocab-help-section {
      flex-direction: column;
    }
  }
</style>
</head>

<body>
  <header>
    <div class="bar">
      <h1>üìö Reading Comprehension Practice</h1>
      <div class="controls">
        <button id="resetActivity" class="warning">üîÑ Reset</button>
        <button id="nextStory" class="success" style="display:none;">Next Story ‚Üí</button>
      </div>
    </div>
  </header>

  <main>
    <div class="story-selector" id="storySelector">
      <!-- Story buttons will be generated -->
    </div>

    <div class="activity-container">
      <div class="story-header">
        <h2 class="story-title" id="storyTitle">Story Title</h2>
      </div>

      <div class="activity-toggle">
        <button class="toggle-btn active" data-activity="main-idea">üìù Main Idea & Details</button>
        <button class="toggle-btn" data-activity="vocabulary">üìñ Vocabulary</button>
      </div>

      <div class="story-text" id="storyText">
        <!-- Story content will be populated here -->
      </div>

      <!-- Main Idea & Details Activity -->
      <div class="activity-section active" id="mainIdeaSection">
        <div class="main-idea-activity">
          <div class="choices-bank">
            <h3>üìù Drag the Statements</h3>
            <div id="choicesBank">
              <!-- Choices will be populated here -->
            </div>
          </div>

          <div class="drop-zones">
            <div class="drop-zone main-idea-zone" data-zone="main-idea">
              <h3>üéØ Main Idea</h3>
              <div class="zone-content" id="mainIdeaZone">
                <div class="empty-zone-message">Drag the main idea here<br>(What is this story mostly about?)</div>
              </div>
            </div>

            <div class="drop-zone details-zone" data-zone="details">
              <h3>üìã Supporting Details</h3>
              <div class="zone-content" id="detailsZone">
                <div class="empty-zone-message">Drag 3 supporting details here<br>(What specific facts support the main idea?)</div>
              </div>
            </div>
          </div>
        </div>

        <button id="checkMainIdea" class="primary" style="margin-top: 20px;">‚úì Check My Work</button>
        <div class="feedback" id="mainIdeaFeedback">
          <p id="mainIdeaFeedbackText"></p>
        </div>
      </div>

      <!-- Vocabulary Activity -->
      <div class="activity-section" id="vocabularySection">
        <div class="vocab-activity" id="vocabActivity">
          <!-- Vocabulary words will be populated here -->
        </div>
      </div>
    </div>
  </main>

<script>
const stories = [
  {
    title: "Alex's Garden Project",
    text: `Alex had always been interested in growing things, but had never tried gardening before. When their science teacher assigned a project about plant growth, Alex decided this was the perfect opportunity to start a small garden in the backyard. They spent the weekend researching which vegetables would grow best in their area and what supplies they would need.

    The next week, Alex convinced their parents to take them to the garden center. They carefully selected tomato plants, bean seeds, and lettuce seeds. Alex also picked out a small shovel, watering can, and some fertilizer. Back at home, they measured out a 4-foot by 6-foot plot and began preparing the soil, removing weeds and rocks.

    Over the next two months, Alex watered their garden every morning before school and checked on the plants each afternoon. When the first tiny tomatoes appeared, Alex felt incredibly proud. By the end of the school term, they had grown enough vegetables to share with their family and had earned an A+ on their science project. The experience taught Alex that with planning, patience, and daily care, they could successfully grow their own food.`,
    mainIdea: "Alex successfully completed a science project by starting and maintaining their first garden.",
    details: [
      "Alex researched which vegetables would grow best in their area",
      "They selected tomato plants, bean seeds, and lettuce seeds at the garden center", 
      "Alex watered the garden every morning and checked on plants each afternoon",
      "They earned an A+ on their science project and shared vegetables with family"
    ],
    foils: [
      "Alex's teacher gave the class a very difficult science assignment",
      "The garden center had the best prices in town for gardening supplies"
    ],
    vocabulary: [
      {
        word: "convinced",
        sentence: "The next week, Alex convinced their parents to take them to the garden center.",
        question: "What does 'convinced' mean in this sentence?",
        hint1: "Think about what Alex had to do to get their parents to agree.",
        hint2: "This word means Alex had to give their parents good reasons or arguments.",
        choices: [
          "persuaded or talked someone into doing something",
          "forced someone to do something against their will", 
          "asked politely one time"
        ],
        correct: 0
      },
      {
        word: "fertilizer",
        sentence: "Alex also picked out a small shovel, watering can, and some fertilizer.",
        question: "What is 'fertilizer' in this context?",
        hint1: "Look at what else Alex bought - tools and supplies for gardening.",
        hint2: "This is something that helps plants grow better and stronger.",
        choices: [
          "a substance that provides nutrients to help plants grow",
          "a type of decorative container for plants",
          "a tool used to dig holes in the ground"
        ],
        correct: 0
      },
      {
        word: "plot",
        sentence: "Back at home, they measured out a 4-foot by 6-foot plot and began preparing the soil.",
        question: "What does 'plot' mean here?",
        hint1: "Alex measured out something that was 4 feet by 6 feet.",
        hint2: "This is a specific area of land that Alex marked out for their garden.",
        choices: [
          "a small area of ground designated for a specific purpose",
          "a secret plan to do something",
          "the main story line of a book or movie"
        ],
        correct: 0
      }
    ]
  },
  {
    title: "The School Talent Show Challenge",
    text: `Maya had been playing piano for three years, but she had never performed in front of a large audience. When the announcements mentioned tryouts for the school talent show, Maya felt both excited and nervous. She had been working on a beautiful classical piece called "F√ºr Elise" by Beethoven, and she thought it might be perfect for the talent show.

    Maya decided to audition, but she knew she needed to practice more to feel confident. For the next three weeks, she practiced the piece every day after school for at least an hour. She also asked her piano teacher for extra help with the difficult parts. Her teacher suggested she practice performing in front of small groups first, so Maya played for her family, then for her best friend, and finally for her piano class.

    On the day of auditions, Maya felt prepared but still nervous. When her turn came, she walked confidently to the piano, took a deep breath, and began to play. The music flowed beautifully, and she only made one small mistake that most people probably didn't notice. The judges smiled and nodded throughout her performance. A week later, Maya was thrilled to see her name on the list of selected performers. The talent show was still a month away, but Maya felt ready for the challenge.`,
    mainIdea: "Maya prepared thoroughly for the school talent show audition and successfully earned a spot as a performer.",
    details: [
      "Maya had been playing piano for three years but never performed for a large audience",
      "She practiced 'F√ºr Elise' every day after school for at least an hour for three weeks",
      "Her piano teacher suggested practicing in front of small groups first",
      "Maya was selected to perform in the talent show after her successful audition"
    ],
    foils: [
      "The school talent show was the most popular event of the year",
      "Beethoven composed many famous classical pieces for piano students"
    ],
    vocabulary: [
      {
        word: "audition",
        sentence: "Maya decided to audition, but she knew she needed to practice more to feel confident.",
        question: "What does 'audition' mean?",
        hint1: "Maya had to do this to try to get into the talent show.",
        hint2: "This is when someone performs to show their skills and try to be selected.",
        choices: [
          "perform to try out for a role or position in a show",
          "practice a musical piece in private",
          "watch other people perform their talents"
        ],
        correct: 0
      },
      {
        word: "classical",
        sentence: "She had been working on a beautiful classical piece called 'F√ºr Elise' by Beethoven.",
        question: "What type of music is 'classical'?",
        hint1: "The piece was written by Beethoven, a famous composer from long ago.",
        hint2: "This type of music is often performed by orchestras and has been around for centuries.",
        choices: [
          "traditional, formal music often written by famous composers from the past",
          "modern music with electronic instruments and beats",
          "folk music passed down through families and communities"
        ],
        correct: 0
      },
      {
        word: "confidently",
        sentence: "When her turn came, she walked confidently to the piano, took a deep breath, and began to play.",
        question: "How did Maya walk 'confidently'?",
        hint1: "Think about how someone walks when they feel sure of themselves.",
        hint2: "This describes walking in a way that shows you believe in yourself and feel prepared.",
        choices: [
          "in a self-assured way that shows belief in one's abilities",
          "very slowly and carefully to avoid making mistakes",
          "quickly and nervously because of being scared"
        ],
        correct: 0
      }
    ]
  },
  {
    title: "The Mystery of the Missing Lunch",
    text: `Every day at Lincoln Middle School, students stored their lunch boxes in the classroom cubbies before going to morning classes. But this week, something strange was happening. Several students reported that items from their lunches were disappearing. First, Emma's homemade cookies vanished. Then Jake's apple was gone. By Thursday, five different students had lost parts of their lunches, and everyone was getting frustrated and suspicious of each other.

    Ms. Rodriguez, the homeroom teacher, decided to investigate. She asked the students to describe exactly what was missing and when they noticed it. She also checked the classroom during different times of the day to look for clues. On Friday morning, Ms. Rodriguez arrived at school extra early and quietly watched the classroom from the hallway. That's when she spotted the real culprit - a clever gray squirrel that had found a way into the classroom through a loose window screen.

    The squirrel had been sneaking in each morning, opening lunch boxes with its tiny paws, and taking the most appealing snacks back to its nest outside. Ms. Rodriguez fixed the window screen and explained the mystery to her relieved students. Everyone laughed about the situation, and Jake even suggested they should leave some nuts outside for their "classroom visitor." The missing lunch mystery was finally solved, and the students learned that sometimes the simplest explanation is the right one.`,
    mainIdea: "A teacher solved the mystery of missing lunch items by discovering a squirrel was sneaking into the classroom to steal food.",
    details: [
      "Several students reported that items from their lunches were disappearing during the week",
      "Ms. Rodriguez investigated by asking questions and watching the classroom at different times",
      "She discovered a gray squirrel entering through a loose window screen",
      "The squirrel was taking snacks from lunch boxes and bringing them to its nest outside"
    ],
    foils: [
      "Lincoln Middle School had problems with its cafeteria food being low quality",
      "Students at the school were not allowed to bring homemade food items"
    ],
    vocabulary: [
      {
        word: "suspicious",
        sentence: "By Thursday, five different students had lost parts of their lunches, and everyone was getting frustrated and suspicious of each other.",
        question: "What does 'suspicious' mean in this context?",
        hint1: "The students were starting to think someone was taking their food on purpose.",
        hint2: "This word describes the feeling when you think someone might be doing something wrong.",
        choices: [
          "having doubts about someone and thinking they might be doing something wrong",
          "feeling very angry and wanting to start an argument",
          "being confused and not understanding what is happening"
        ],
        correct: 0
      },
      {
        word: "investigate",
        sentence: "Ms. Rodriguez, the homeroom teacher, decided to investigate.",
        question: "What does 'investigate' mean?",
        hint1: "Ms. Rodriguez wanted to find out what was really happening to the lunches.",
        hint2: "This means to carefully examine and search for information to solve a problem.",
        choices: [
          "to examine carefully and search for information to solve a mystery or problem",
          "to punish students who have broken classroom rules",
          "to ask parents to provide different types of lunch foods"
        ],
        correct: 0
      },
      {
        word: "culprit",
        sentence: "That's when she spotted the real culprit - a clever gray squirrel that had found a way into the classroom.",
        question: "Who or what is the 'culprit'?",
        hint1: "This is whoever or whatever was actually causing the problem.",
        hint2: "The culprit is the one responsible for taking the lunch items.",
        choices: [
          "the person or thing responsible for causing a problem or crime",
          "an innocent bystander who happened to see what occurred",
          "a witness who can provide information about what happened"
        ],
        correct: 0
      }
    ]
  },
  {
    title: "Building the Perfect Model Bridge",
    text: `In Mr. Chen's engineering class, students were challenged to build a model bridge using only popsicle sticks, glue, and string. The bridge had to span a 12-inch gap and hold as much weight as possible without breaking. Sarah and her partner Tom spent their first day researching different types of bridge designs online and in the school library. They discovered that truss bridges, with their triangular support structures, were often the strongest for their weight.

    For the next week, Sarah and Tom worked carefully during each class period. They cut popsicle sticks to precise lengths and glued them together to form triangular trusses. The most challenging part was making sure all the joints were perfectly aligned and securely glued. Tom was naturally good with detailed work, while Sarah excelled at planning and measuring. They made several mistakes along the way and had to rebuild sections, but they learned from each error and made their bridge stronger.

    On testing day, students placed their bridges across two desks and slowly added weights until the bridges collapsed. Many bridges broke under just a few pounds, but Sarah and Tom's bridge held an impressive 15 pounds before finally giving way. Their careful research, precise construction, and teamwork had paid off. Mr. Chen praised their bridge as an excellent example of engineering principles in action, and Sarah felt proud of what they had accomplished together.`,
    mainIdea: "Sarah and Tom successfully built a strong model bridge by researching designs, working carefully together, and learning from their mistakes.",
    details: [
      "They researched different bridge designs and chose truss bridges with triangular supports",
      "They worked carefully for a week, cutting sticks to precise lengths and gluing triangular trusses",
      "Tom was good with detailed work while Sarah excelled at planning and measuring",
      "Their bridge held 15 pounds, much more than most other bridges in the class"
    ],
    foils: [
      "Mr. Chen's engineering class was the most difficult class at the school",
      "Popsicle sticks are the cheapest building material available for student projects"
    ],
    vocabulary: [
      {
        word: "span",
        sentence: "The bridge had to span a 12-inch gap and hold as much weight as possible without breaking.",
        question: "What does 'span' mean in this sentence?",
        hint1: "The bridge needed to go from one side to the other side of something.",
        hint2: "This means to extend across or bridge a distance or gap.",
        choices: [
          "extend across or bridge a distance between two points",
          "measure the exact length of something using a ruler",
          "break apart or collapse under too much pressure"
        ],
        correct: 0
      },
      {
        word: "precise",
        sentence: "They cut popsicle sticks to precise lengths and glued them together to form triangular trusses.",
        question: "What does 'precise' mean?",
        hint1: "Sarah and Tom were very careful about making exact measurements.",
        hint2: "This word means exact and accurate, with no mistakes in measurement.",
        choices: [
          "exact and accurate, with careful attention to correct measurements",
          "approximately correct but not exactly perfect",
          "quick and efficient, done as fast as possible"
        ],
        correct: 0
      },
      {
        word: "principles",
        sentence: "Mr. Chen praised their bridge as an excellent example of engineering principles in action.",
        question: "What are 'principles' in this context?",
        hint1: "These are the basic rules and ideas that engineers use when building things.",
        hint2: "Principles are fundamental concepts or rules that guide how something should be done.",
        choices: [
          "basic rules, concepts, or guidelines that form the foundation of a subject",
          "expensive tools and equipment needed for construction projects",
          "specific measurements that must be followed exactly in all projects"
        ],
        correct: 0
      }
    ]
  },
  {
    title: "The Community Service Project",
    text: `When Jamal's social studies teacher announced that each student needed to complete 20 hours of community service, Jamal wasn't sure where to start. He had never done volunteer work before and felt overwhelmed by all the options. His teacher provided a list of local organizations that welcomed student volunteers, including the animal shelter, food bank, library, and senior center. After thinking about his interests, Jamal decided he wanted to work somewhere he could make a direct difference in people's lives.

    Jamal chose to volunteer at the Riverside Senior Center, where he would spend time with elderly residents who didn't get many visitors. On his first day, he was nervous about talking to people he didn't know, especially older adults. However, the activity coordinator, Mrs. Patterson, was very welcoming and introduced him to several residents. Jamal discovered that many of them had fascinating stories about their lives and careers. He began visiting twice a week, playing board games, helping with simple crafts, and mostly just listening to their experiences.

    By the end of his 20 hours, Jamal had formed genuine friendships with several residents, particularly Mr. Willis, a retired teacher who shared Jamal's love of basketball. Jamal realized that while he had come to fulfill a school requirement, he had gained something much more valuable - the understanding that helping others also enriches your own life. He decided to continue volunteering at the senior center even after completing his required hours, and he encouraged his friends to find their own community service opportunities.`,
    mainIdea: "Jamal completed his community service requirement by volunteering at a senior center and discovered that helping others was personally rewarding.",
    details: [
      "Jamal chose to volunteer at the Riverside Senior Center to work directly with people",
      "He spent time playing games, helping with crafts, and listening to residents' stories",
      "He formed genuine friendships, especially with Mr. Willis, a retired teacher",
      "Jamal decided to continue volunteering even after completing his required 20 hours"
    ],
    foils: [
      "The social studies teacher gave students a very challenging assignment about community problems",
      "Most students preferred to volunteer at the animal shelter because it was more fun"
    ],
    vocabulary: [
      {
        word: "overwhelmed",
        sentence: "He had never done volunteer work before and felt overwhelmed by all the options.",
        question: "What does 'overwhelmed' mean?",
        hint1: "Jamal had too many choices and didn't know how to decide.",
        hint2: "This feeling happens when there's too much to handle or think about at once.",
        choices: [
          "feeling like there's too much to handle or deal with at once",
          "feeling very excited and eager to get started on something",
          "feeling bored because there aren't enough interesting choices"
        ],
        correct: 0
      },
      {
        word: "genuine",
        sentence: "By the end of his 20 hours, Jamal had formed genuine friendships with several residents.",
        question: "What does 'genuine' mean in this context?",
        hint1: "These friendships were real and sincere, not fake or pretend.",
        hint2: "This word describes something that is authentic and truly felt.",
        choices: [
          "real, sincere, and authentic",
          "temporary and likely to end soon",
          "polite but not very deep or meaningful"
        ],
        correct: 0
      },
      {
        word: "enriches",
        sentence: "He realized that while he had come to fulfill a school requirement, he had gained something much more valuable - the understanding that helping others also enriches your own life.",
        question: "What does 'enriches' mean?",
        hint1: "Helping others made Jamal's life better and more meaningful in some way.",
        hint2: "This means to make something better, fuller, or more valuable.",
        choices: [
          "makes something better, more meaningful, or more valuable",
          "makes something more difficult and complicated",
          "makes something cost more money than before"
        ],
        correct: 0
      }
    ]
  }
];

let currentStory = 0;
let currentActivity = 'main-idea';
let draggedElement = null;

function initializePage() {
  createStorySelector();
  loadStory(0);
  setupEventListeners();
}

function createStorySelector() {
  const selector = document.getElementById('storySelector');
  stories.forEach((story, index) => {
    const btn = document.createElement('button');
    btn.className = `story-btn ${index === 0 ? 'active' : ''}`;
    btn.dataset.story = index;
    btn.textContent = `Story ${index + 1}`;
    selector.appendChild(btn);
  });
}

function loadStory(index) {
  currentStory = index;
  const story = stories[index];
  
  document.getElementById('storyTitle').textContent = story.title;
  document.getElementById('storyText').innerHTML = story.text.split('\n\n').map(p => `<p>${p.trim()}</p>`).join('');
  
  updateStorySelector();
  loadMainIdeaActivity();
  loadVocabularyActivity();
  
  // Reset activity toggle
  document.querySelectorAll('.toggle-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.activity === currentActivity);
  });
  
  showActivity(currentActivity);
}

function updateStorySelector() {
  document.querySelectorAll('.story-btn').forEach((btn, index) => {
    btn.classList.toggle('active', index === currentStory);
  });
}

function loadMainIdeaActivity() {
  const story = stories[currentStory];
  const bank = document.getElementById('choicesBank');
  bank.innerHTML = '';
  
  // Clear zones
  document.getElementById('mainIdeaZone').innerHTML = '<div class="empty-zone-message">Drag the main idea here<br>(What is this story mostly about?)</div>';
  document.getElementById('detailsZone').innerHTML = '<div class="empty-zone-message">Drag 3 supporting details here<br>(What specific facts support the main idea?)</div>';
  
  // Create all choices (main idea + details + foils) and shuffle
  const allChoices = [
    { text: story.mainIdea, type: 'main-idea' },
    ...story.details.map(detail => ({ text: detail, type: 'detail' })),
    ...story.foils.map(foil => ({ text: foil, type: 'foil' }))
  ].sort(() => Math.random() - 0.5);
  
  allChoices.forEach((choice, index) => {
    const element = document.createElement('div');
    element.className = 'draggable-choice';
    element.draggable = true;
    element.textContent = choice.text;
    element.dataset.type = choice.type;
    element.dataset.index = index;
    
    element.addEventListener('dragstart', handleDragStart);
    element.addEventListener('dragend', handleDragEnd);
    
    bank.appendChild(element);
  });
  
  setupDropZones();
  document.getElementById('mainIdeaFeedback').classList.remove('show');
}

function loadVocabularyActivity() {
  const story = stories[currentStory];
  const container = document.getElementById('vocabActivity');
  container.innerHTML = '';
  
  story.vocabulary.forEach((vocabItem, index) => {
    const vocabDiv = document.createElement('div');
    vocabDiv.className = 'vocab-word';
    vocabDiv.innerHTML = `
      <div class="vocab-word-title">Word ${index + 1}: "${vocabItem.word}"</div>
      
      <div class="vocab-sentence">
        ${vocabItem.sentence.replace(vocabItem.word, `<span class="vocab-target">${vocabItem.word}</span>`)}
      </div>
      
      <div class="vocab-question">${vocabItem.question}</div>
      
      <textarea class="vocab-input" id="vocab_${index}" placeholder="Type what you think this word means..."></textarea>
      
      <div class="vocab-help-section">
        <button class="warning" onclick="showHint(${index}, 1)">üí° I need help</button>
        <button class="warning" onclick="showHint(${index}, 2)" style="display:none;" id="hint2Btn_${index}">üí° More help</button>
        <button class="primary" onclick="checkVocabAnswer(${index})">‚úì Check Answer</button>
      </div>
      
      <div class="hint-box" id="hint1_${index}">
        <h4>üí° Hint 1:</h4>
        <p>${vocabItem.hint1}</p>
      </div>
      
      <div class="hint-box" id="hint2_${index}">
        <h4>üí° Hint 2:</h4>
        <p>${vocabItem.hint2}</p>
      </div>
      
      <div class="multiple-choice" id="choices_${index}">
        <h4>Choose the best definition:</h4>
        ${vocabItem.choices.map((choice, choiceIndex) => 
          `<div class="choice-option" data-vocab="${index}" data-choice="${choiceIndex}">${choice}</div>`
        ).join('')}
        <button class="primary" onclick="checkMultipleChoice(${index})" style="margin-top: 10px;">Check Selected Answer</button>
      </div>
      
      <div class="feedback" id="vocabFeedback_${index}"></div>
    `;
    
    container.appendChild(vocabDiv);
  });
  
  // Add event listeners for multiple choice
  document.querySelectorAll('.choice-option').forEach(option => {
    option.addEventListener('click', function() {
      const vocabIndex = this.dataset.vocab;
      document.querySelectorAll(`[data-vocab="${vocabIndex}"]`).forEach(opt => opt.classList.remove('selected'));
      this.classList.add('selected');
    });
  });
}

function showActivity(activityType) {
  currentActivity = activityType;
  document.querySelectorAll('.activity-section').forEach(section => {
    section.classList.remove('active');
  });
  document.querySelectorAll('.toggle-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.activity === activityType);
  });
  
  if (activityType === 'main-idea') {
    document.getElementById('mainIdeaSection').classList.add('active');
  } else {
    document.getElementById('vocabularySection').classList.add('active');
  }
}

// Drag and Drop functionality
function handleDragStart(e) {
  draggedElement = e.target;
  e.target.classList.add('dragging');
  e.dataTransfer.effectAllowed = 'move';
}

function handleDragEnd(e) {
  e.target.classList.remove('dragging');
  draggedElement = null;
}

function setupDropZones() {
  const dropZones = document.querySelectorAll('.drop-zone');
  
  dropZones.forEach(zone => {
    zone.addEventListener('dragover', (e) => {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
    });
    
    zone.addEventListener('dragenter', (e) => {
      e.preventDefault();
      e.currentTarget.classList.add('drag-over');
    });
    
    zone.addEventListener('dragleave', (e) => {
      if (!e.currentTarget.contains(e.relatedTarget)) {
        e.currentTarget.classList.remove('drag-over');
      }
    });
    
    zone.addEventListener('drop', (e) => {
      e.preventDefault();
      e.currentTarget.classList.remove('drag-over');
      
      if (draggedElement) {
        const zoneContent = e.currentTarget.querySelector('.zone-content');
        const zoneType = e.currentTarget.dataset.zone;
        
        // Check if it's the details zone and already has 3 items
        if (zoneType === 'details') {
          const currentItems = zoneContent.querySelectorAll('.draggable-choice');
          if (currentItems.length >= 3) {
            alert('The Details zone can only hold 3 items. Remove one first if you want to add a different one.');
            return;
          }
        }
        
        // Check if it's the main idea zone and already has 1 item
        if (zoneType === 'main-idea') {
          const currentItems = zoneContent.querySelectorAll('.draggable-choice');
          if (currentItems.length >= 1) {
            alert('The Main Idea zone can only hold 1 item. Remove it first if you want to add a different one.');
            return;
          }
        }
        
        draggedElement.remove();
        zoneContent.appendChild(draggedElement);
        updateEmptyMessages();
        draggedElement.classList.add('placed');
        draggedElement.classList.remove('incorrect');
      }
    });
  });
}

function updateEmptyMessages() {
  ['mainIdeaZone', 'detailsZone'].forEach(zoneId => {
    const zone = document.getElementById(zoneId);
    const message = zone.querySelector('.empty-zone-message');
    const items = zone.querySelectorAll('.draggable-choice');
    if (message) message.style.display = items.length > 0 ? 'none' : 'block';
  });
}

function checkMainIdea() {
  const mainIdeaZone = document.getElementById('mainIdeaZone');
  const detailsZone = document.getElementById('detailsZone');
  
  const mainIdeaItems = mainIdeaZone.querySelectorAll('.draggable-choice');
  const detailItems = detailsZone.querySelectorAll('.draggable-choice');
  
  let correct = 0;
  let total = 0;
  let feedback = [];
  
  // Check main idea (should have exactly 1, and it should be correct)
  if (mainIdeaItems.length === 0) {
    feedback.push("You need to put one statement in the Main Idea box.");
  } else if (mainIdeaItems.length > 1) {
    feedback.push("The Main Idea box should only have one statement.");
  } else {
    total++;
    const item = mainIdeaItems[0];
    if (item.dataset.type === 'main-idea') {
      correct++;
      item.classList.remove('incorrect');
      item.classList.add('placed');
    } else {
      item.classList.add('incorrect');
      feedback.push("The statement in the Main Idea box is not the main idea of the story.");
    }
  }
  
  // Check details (should have exactly 3, and they should all be correct)
  if (detailItems.length < 3) {
    feedback.push(`You need to put 3 supporting details in the Details box. You have ${detailItems.length}.`);
  } else {
    detailItems.forEach(item => {
      total++;
      if (item.dataset.type === 'detail') {
        correct++;
        item.classList.remove('incorrect');
        item.classList.add('placed');
      } else {
        item.classList.add('incorrect');
        if (item.dataset.type === 'main-idea') {
          feedback.push("The main idea belongs in the Main Idea box, not the Details box.");
        } else {
          feedback.push(`"${item.textContent.substring(0, 30)}..." is not a supporting detail from the story.`);
        }
      }
    });
  }
  
  // Show feedback
  const feedbackEl = document.getElementById('mainIdeaFeedback');
  const feedbackText = document.getElementById('mainIdeaFeedbackText');
  
  if (correct === 4 && total === 4) {
    feedbackEl.className = 'feedback success show';
    feedbackText.innerHTML = `
      <strong>üéâ Excellent work!</strong><br>
      You correctly identified the main idea and all 3 supporting details! You have great reading comprehension skills.
    `;
  } else {
    feedbackEl.className = 'feedback error show';
    feedbackText.innerHTML = `
      <strong>Score: ${correct} out of 4 correct</strong><br>
      ${feedback.length > 0 ? feedback.join('<br>') : ''}
      <br><em>Remember: The main idea is what the story is mostly about. Supporting details are specific facts that help explain or support the main idea.</em>
    `;
  }
}

// Vocabulary functions
function showHint(vocabIndex, hintNumber) {
  const hintBox = document.getElementById(`hint${hintNumber}_${vocabIndex}`);
  hintBox.classList.add('show');
  
  if (hintNumber === 1) {
    document.getElementById(`hint2Btn_${vocabIndex}`).style.display = 'inline-block';
  } else if (hintNumber === 2) {
    document.getElementById(`choices_${vocabIndex}`).classList.add('show');
  }
}

function checkVocabAnswer(vocabIndex) {
  const input = document.getElementById(`vocab_${vocabIndex}`);
  const feedback = document.getElementById(`vocabFeedback_${vocabIndex}`);
  const story = stories[currentStory];
  const vocabItem = story.vocabulary[vocabIndex];
  const correctAnswer = vocabItem.choices[vocabItem.correct];
  
  if (input.value.trim() === '') {
    feedback.className = 'feedback error show';
    feedback.innerHTML = '<strong>Please type your answer first!</strong>';
    return;
  }
  
  feedback.className = 'feedback success show';
  feedback.innerHTML = `
    <strong>Your answer:</strong> "${input.value}"<br>
    <strong>Sample correct answer:</strong> "${correctAnswer}"<br>
    <em>Great job thinking about the context! Discuss your answer with your teacher to see how close you were.</em>
  `;
}

function checkMultipleChoice(vocabIndex) {
  const selected = document.querySelector(`[data-vocab="${vocabIndex}"].selected`);
  const feedback = document.getElementById(`vocabFeedback_${vocabIndex}`);
  const story = stories[currentStory];
  const vocabItem = story.vocabulary[vocabIndex];
  
  if (!selected) {
    feedback.className = 'feedback error show';
    feedback.innerHTML = '<strong>Please select an answer first!</strong>';
    return;
  }
  
  const choiceIndex = parseInt(selected.dataset.choice);
  const isCorrect = choiceIndex === vocabItem.correct;
  
  document.querySelectorAll(`[data-vocab="${vocabIndex}"]`).forEach(option => {
    const optionIndex = parseInt(option.dataset.choice);
    if (optionIndex === vocabItem.correct) {
      option.classList.add('correct');
    } else if (option.classList.contains('selected') && !isCorrect) {
      option.classList.add('incorrect');
    }
  });
  
  if (isCorrect) {
    feedback.className = 'feedback success show';
    feedback.innerHTML = '<strong>üéâ Correct!</strong> You used the context clues well to figure out the meaning.';
  } else {
    feedback.className = 'feedback error show';
    feedback.innerHTML = `<strong>Not quite.</strong> The correct answer is highlighted in green. Look at the context clues in the sentence to see why that answer makes the most sense.`;
  }
}

function resetActivity() {
  if (currentActivity === 'main-idea') {
    loadMainIdeaActivity();
  } else {
    loadVocabularyActivity();
  }
}

function setupEventListeners() {
  // Story selector
  document.getElementById('storySelector').addEventListener('click', (e) => {
    if (e.target.classList.contains('story-btn')) {
      const storyIndex = parseInt(e.target.dataset.story);
      loadStory(storyIndex);
    }
  });
  
  // Activity toggle
  document.querySelectorAll('.toggle-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      showActivity(btn.dataset.activity);
    });
  });
  
  // Control buttons
  document.getElementById('checkMainIdea').addEventListener('click', checkMainIdea);
  document.getElementById('resetActivity').addEventListener('click', resetActivity);
  document.getElementById('nextStory').addEventListener('click', () => {
    if (currentStory < stories.length - 1) {
      loadStory(currentStory + 1);
    }
  });
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', initializePage);
</script>
</body>
</html>